"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[263],{6263:function(e,t,s){s.r(t),s.d(t,{default:function(){return _}});var i=s(4562),a=s(266),o=s(2118),n=s(4324),r=s(5495),l=s(5372),c=s(3305),d=s(1713),h=s(9780),u=function(){var e=this,t=e._self._c;return t(o.Z,[t(d.Z,{attrs:{justify:"center"}},[t(a.Z,{attrs:{md:"4"}},[t(h.Z,{attrs:{label:"请输入搜索关键字...按回车搜素",dense:"",clearable:"",outlined:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1),t(a.Z,{attrs:{md:"2"}},[t(i.Z,{attrs:{outlined:""},on:{click:e.search}},[t(n.Z,[e._v("mdi-magnify")]),e._v("搜索一下 ")],1)],1),t(a.Z,{attrs:{md:"1"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.info.isLoading,expression:"info.isLoading"}]},[t(c.Z,{attrs:{indeterminate:"",color:"primary"}})],1)])],1),t(d.Z,[t("div",[t("div",[t("h1",{directives:[{name:"show",rawName:"v-show",value:e.info.isFirst,expression:"info.isFirst"}]},[e._v("请输入搜索关键字...按回车进行搜索")])]),t("h1",{directives:[{name:"show",rawName:"v-show",value:e.info.errMsg,expression:"info.errMsg"}]},[e._v(e._s(e.info.errMsg))]),t("h1",{directives:[{name:"show",rawName:"v-show",value:e.unsearched,expression:"unsearched"}]},[e._v("未搜索到信息")])])]),t("div",[e._l(e.info.users,(function(s){return t("div",{directives:[{name:"show",rawName:"v-show",value:e.info.users.length,expression:"info.users.length"}],key:s.id,staticClass:"img-box"},[t("div",{on:{click:e.canvasco}},[t(r.Z,{attrs:{src:s.src,"aspect-ratio":279.984/186.656},on:{click:function(t){return e.updatesdetail(s)}}})],1),t("span",{staticClass:"res-span"},[e._v(e._s(s.res))]),t("span",{staticClass:"down-span"},[t("a",{attrs:{href:s.src,target:"downloadFile"}},[e._v("保存")])]),t("span",{staticClass:"like-span",on:{click:function(t){return e.favorite_item(s)}}},[t(i.Z,{directives:[{name:"show",rawName:"v-show",value:0==e.favorState(s),expression:"favorState(item) == false"}],attrs:{icon:"",color:"red"}},[t(n.Z,[e._v("favorite_border")])],1),t(i.Z,{directives:[{name:"show",rawName:"v-show",value:1==e.favorState(s),expression:"favorState(item) == true"}],attrs:{icon:"",color:"red"}},[t(n.Z,[e._v("favorite")])],1)],1)])})),e.isdtpageshow?t("div",{staticClass:"image-background"},[t("canvas"),t("span",{staticClass:"close-span"},[t(n.Z,{attrs:{color:"white"},on:{click:e.closedetailpage}},[e._v("close")])],1),t("div",{staticClass:"image-resolution"},[t("span",[e._v(e._s(e.imgselect.res))])]),t("div",{staticClass:"image-tools-bar"},[t(i.Z,{staticClass:"tool",attrs:{title:"上一张",text:""},on:{click:e.backone}},[t(n.Z,[e._v("arrow_back")])],1),t(i.Z,{directives:[{name:"show",rawName:"v-show",value:0==e.favorState(e.imgselect),expression:"favorState(imgselect) == false"}],staticClass:"tool",attrs:{title:"喜欢",text:""},on:{click:function(t){return e.favorite_item(e.imgselect)}}},[t(n.Z,{attrs:{color:"red"}},[e._v("favorite_border")])],1),t(i.Z,{directives:[{name:"show",rawName:"v-show",value:1==e.favorState(e.imgselect),expression:"favorState(imgselect) == true"}],staticClass:"tool",attrs:{title:"喜欢",text:""},on:{click:function(t){return e.favorite_item(e.imgselect)}}},[t(n.Z,{attrs:{color:"red"}},[e._v("favorite")])],1),t(i.Z,{staticClass:"tool",attrs:{href:e.imgselect.src,title:"下载",a:"",text:""}},[t(n.Z,{attrs:{color:"green"}},[e._v("file_download")])],1),t(i.Z,{directives:[{name:"show",rawName:"v-show",value:e.isFull,expression:"isFull"}],staticClass:"tool",attrs:{title:"全屏",text:""},on:{click:e.toggleFullScreen}},[t(n.Z,{attrs:{color:"blue"}},[e._v("fullscreen")])],1),t(i.Z,{directives:[{name:"show",rawName:"v-show",value:!e.isFull,expression:"!isFull"}],staticClass:"tool",attrs:{title:"结束全屏",text:""},on:{click:e.toggleFullScreen}},[t(n.Z,{attrs:{color:"blue"}},[e._v("fullscreen_exit")])],1),t(i.Z,{staticClass:"tool",attrs:{title:"下一张",text:""},on:{click:e.nextone}},[t(n.Z,[e._v("arrow_forward")])],1)],1)]):e._e()],2),t("div",{directives:[{name:"show",rawName:"v-show",value:e.info.users.length,expression:"info.users.length"}],staticClass:"text-center pagination-bar"},[t(o.Z,[t("div",{staticClass:"vue_pagination"},[t(l.Z,{attrs:{length:e.length,"prev-icon":"arrow_left","next-icon":"arrow_right"},on:{input:function(t){e.$vuetify.goTo(0,"duration"),e.lol()}},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),t("hr"),t(i.Z,[e._v("当前共 "+e._s(this.total)+" 张 / "+e._s(this.length)+" 页 Page = "+e._s(this.page))])],1)])],1)],1)},g=[],v=s(629),m=s(4471),f={name:"SearchTime",data(){return{keyWord:"",isFull:!0,imgindex:0,imgselect:{},isdtpageshow:!1,thesize:{dx:0,dy:0,width:0,height:0},page:1,length:1,total:1,info:{isFirst:!0,isLoading:!1,errMsg:"",users:[]}}},computed:{...(0,v.rn)("favorites",{lovelistids:"lovelistids"}),...(0,v.rn)("settings",{Defaultstate:"Defaultstate"}),unsearched(){return 0==this.total?1:null}},methods:{...(0,v.nv)("favorites",{favorite_item:"FAVORITE_IT"}),...(0,v.OI)("favorites",{CONNECT:"CONNECT_IDB",ADD:"ADD_OBJECT",DELET:"DELETE_OBJECT"}),search(){this.info={isFirst:!1,isLoading:!0,errMsg:"",users:[]},(0,m.Z)({method:"GET",url:`img/SourceController/getAllSource/${this.page}/${this.Defaultstate.size}?description=${this.keyWord}`}).then((e=>{this.info={isLoading:!1,errMsg:"",users:e.data.data.records},this.length=e.data.data.pages,this.total=e.data.data.total})).catch((e=>{this.info={isLoading:!1,errMsg:e.message,users:[]}}))},favorState(e){return!!this.lovelistids.includes(e.id)},backone(){0<this.imgindex?(this.imgindex--,this.imgselect=this.info.users[this.imgindex],this.canvasco(),console.log(this.imgindex)):0==this.imgindex?console.log("已达到第一张，无法进行一个减"):console.log("其他错误！")},toggleFullScreen(){document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),this.isFull=!0):(document.documentElement.requestFullscreen(),this.isFull=!1)},nextone(){this.imgindex<Number(this.info.users.length)-1?(this.imgindex++,this.imgselect=this.info.users[this.imgindex],this.canvasco()):this.imgindex==Number(this.info.users.length)-1?console.log("已达到最后一张，无法进行一个 + 😵"):console.log("其他错误！")},F11key(){document.documentElement.requestFullscreen()},fulltoexit(){this.isFull=!1,this.isF11=!0},exittofull(){this.isFull=!0,this.isF11=!1,document.fullscreenElement&&document.exitFullscreen()},updatesdetail(e){const t=document.getElementsByTagName("html")[0].style;t.overflowY="hidden",this.imgselect=e,this.imgindex=this.info.users.indexOf(e),this.opendetailpage()},opendetailpage(){this.isdtpageshow=!this.isdtpageshow},lol(){this.search()},closedetailpage(){this.exitfullscreen(),this.isdtpageshow=!1;const e=document.getElementsByTagName("html")[0].style;e.overflowY=""},exitfullscreen(){document.fullscreenElement&&(console.log("全屏状态，退出全屏"),document.exitFullscreen(),this.isFull=!0)},canvasco(){const e=document.querySelector("canvas"),t=e.getContext("2d"),s=new Image;function i(){e.width=window.innerWidth,e.height=window.innerHeight;let t=0,i=0,a=s.naturalWidth,o=s.naturalHeight;return e.width/e.height<=a/o?(o=o/a*e.width,a=e.width,i=(e.height-o)/2):(a=a/o*e.height,o=e.height,t=(e.width-a)/2),{dx:t,dy:i,width:a,height:o}}s.src=this.imgselect.src,s.onload=function(){const e=i();t.drawImage(s,e.dx,e.dy,e.width,e.height)},window.onresize=function(){const e=i();t.drawImage(s,e.dx,e.dy,e.width,e.height)}}},created(){this.CONNECT()}},w=f,p=s(1001),x=(0,p.Z)(w,u,g,!1,null,null,null),_=x.exports}}]);
//# sourceMappingURL=263.9aeef029.js.map