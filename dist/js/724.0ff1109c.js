"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[724],{4724:function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var i=s(4562),o=s(2118),l=s(4324),a=s(5495),n=s(5372),r=function(){var e=this,t=e._self._c;return t(o.Z,[t("div",{directives:[{name:"show",rawName:"v-show",value:0==e.lovelovelist.length,expression:"lovelovelist.length == 0 ? true : false"}]},[e._v(" ËøòÊ≤°ÊúâÂñúÊ¨¢ÁöÑÂõæÁâáÔºåÁÇπÂáªÂõæÁâá‰∏ãÊñπÁ∫¢Ëâ≤Áà±ÂøÉ "),t(l.Z,{attrs:{color:"red"}},[e._v("favorite_outline")]),e._v("ÂñúÊ¨¢Êî∂ËóèÂõæÁâá„ÄÇ ")],1),t("div",[e._l(e.lovelovelist,(function(s){return t("div",{key:s.id,staticClass:"img-box"},[t("div",{on:{click:e.canvasco}},[t(a.Z,{attrs:{src:s.src,"aspect-ratio":279.984/186.656},on:{click:function(t){return e.updatesdetail(s)}}})],1),t("span",{staticClass:"res-span"},[e._v(e._s(s.res))]),t("span",{staticClass:"down-span"},[t("a",{attrs:{href:s.src}},[e._v("‰øùÂ≠ò")])]),t("span",{staticClass:"like-span",on:{click:function(t){return e.favorite_item(s)}}},[t(i.Z,{directives:[{name:"show",rawName:"v-show",value:0==e.favorState(s),expression:"favorState(item) == false"}],attrs:{icon:"",color:"red"}},[t(l.Z,[e._v("favorite_border")])],1),t(i.Z,{directives:[{name:"show",rawName:"v-show",value:1==e.favorState(s),expression:"favorState(item) == true"}],attrs:{icon:"",color:"red"}},[t(l.Z,[e._v("favorite")])],1)],1)])})),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isdtpageshow,expression:"isdtpageshow"}],staticClass:"image-background"},[t("canvas"),t("span",{staticClass:"close-span"},[t(l.Z,{attrs:{color:"white"},on:{click:e.closedetailpage}},[e._v("close")])],1),t("div",{staticClass:"image-resolution"},[t("span",[e._v(e._s(e.imgselect.res))])]),t("div",{staticClass:"image-tools-bar"},[t(i.Z,{staticClass:"tool",attrs:{title:"‰∏ä‰∏ÄÂº†",text:""},on:{click:e.backone}},[t(l.Z,[e._v("arrow_back")])],1),t(i.Z,{directives:[{name:"show",rawName:"v-show",value:0==e.favorState(e.imgselect),expression:"favorState(imgselect) == false"}],staticClass:"tool",attrs:{title:"ÂñúÊ¨¢",text:""},on:{click:function(t){return e.favorite_item(e.imgselect)}}},[t(l.Z,{attrs:{color:"red"}},[e._v("favorite_border")])],1),t(i.Z,{directives:[{name:"show",rawName:"v-show",value:1==e.favorState(e.imgselect),expression:"favorState(imgselect) == true"}],staticClass:"tool",attrs:{title:"ÂñúÊ¨¢",text:""},on:{click:function(t){return e.favorite_item(e.imgselect)}}},[t(l.Z,{attrs:{color:"red"}},[e._v("favorite")])],1),t(i.Z,{staticClass:"tool",attrs:{href:e.imgselect.src,title:"‰∏ãËΩΩ",a:"",text:""}},[t(l.Z,{attrs:{color:"green"}},[e._v("file_download")])],1),t(i.Z,{directives:[{name:"show",rawName:"v-show",value:e.isFull,expression:"isFull"}],staticClass:"tool",attrs:{title:"ÂÖ®Â±è",text:""},on:{click:e.toggleFullScreen}},[t(l.Z,{attrs:{color:"blue"}},[e._v("fullscreen")])],1),t(i.Z,{directives:[{name:"show",rawName:"v-show",value:!e.isFull,expression:"!isFull"}],staticClass:"tool",attrs:{title:"ÁªìÊùüÂÖ®Â±è",text:""},on:{click:e.toggleFullScreen}},[t(l.Z,{attrs:{color:"blue"}},[e._v("fullscreen_exit")])],1),t(i.Z,{staticClass:"tool",attrs:{title:"‰∏ã‰∏ÄÂº†",text:""},on:{click:e.nextone}},[t(l.Z,[e._v("arrow_forward")])],1)],1)])],2),t("div",{staticClass:"text-center pagination-bar"},[t(o.Z,[t("div",{staticClass:"vue_pagination"},[t(n.Z,{attrs:{length:e.length,"prev-icon":"arrow_left","next-icon":"arrow_right"},on:{input:function(t){e.$vuetify.goTo(0,"duration"),e.connectStore()}},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),t("hr"),t(i.Z,[e._v("ÂΩìÂâçÂÖ± "+e._s(this.total)+" Âº† / "+e._s(this.length)+" È°µ Page = "+e._s(this.page))])],1)])],1)])},c=[],h=s(629),v={name:"MyFavorites",data:()=>({lovelovelist:[],isdtpageshow:!1,isFull:!0,imgindex:0,imgselect:{},thesize:{dx:0,dy:0,width:0,height:0},length:null,total:null,page:1}),computed:{...(0,h.rn)("settings",{Defaultstate:"Defaultstate"}),...(0,h.rn)("favorites",{lovelistids:"lovelistids"})},methods:{...(0,h.nv)("favorites",{favorite_item:"FAVORITE_IT"}),...(0,h.OI)("favorites",{CONNECT:"CONNECT_IDB"}),...(0,h.OI)("generals",{testapi:"HELLO"}),resolveAfter2Seconds(e){return new Promise((t=>{setTimeout((()=>{t(e),console.log(e)}),2e3)}))},async fff1(){await this.resolveAfter2Seconds(10);console.log("HELLO")},favorState(e){return!!this.lovelistids.includes(e.id)},canvasco(){const e=document.querySelector("canvas"),t=e.getContext("2d"),s=new Image;function i(){e.width=window.innerWidth,e.height=window.innerHeight;let t=0,i=0,o=s.naturalWidth,l=s.naturalHeight;return e.width/e.height<=o/l?(l=l/o*e.width,o=e.width,i=(e.height-l)/2):(o=o/l*e.height,l=e.height,t=(e.width-o)/2),{dx:t,dy:i,width:o,height:l}}s.src=this.imgselect.src,s.onload=function(){const e=i();t.drawImage(s,e.dx,e.dy,e.width,e.height)},window.onresize=function(){const e=i();t.drawImage(s,e.dx,e.dy,e.width,e.height)}},closedetailpage(){this.exitfullscreen(),this.isdtpageshow=!1;const e=document.getElementsByTagName("html")[0].style;e.overflowY=""},toggleFullScreen(){document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),this.isFull=!0):(document.documentElement.requestFullscreen(),this.isFull=!1)},backone(){0<this.imgindex?(this.imgindex--,this.imgselect=this.lovelovelist[this.imgindex],this.canvasco(),console.log(this.imgindex)):0==this.imgindex?console.log("Â∑≤ËææÂà∞Á¨¨‰∏ÄÂº†ÔºåÊó†Ê≥ïËøõË°å‰∏Ä‰∏™Âáè"):console.log("ÂÖ∂‰ªñÈîôËØØÔºÅ")},nextone(){this.imgindex<Number(this.lovelovelist.length)-1?(this.imgindex++,this.imgselect=this.lovelovelist[this.imgindex],this.canvasco()):this.imgindex==Number(this.lovelovelist.length)-1?console.log("Â∑≤ËææÂà∞ÊúÄÂêé‰∏ÄÂº†ÔºåÊó†Ê≥ïËøõË°å‰∏Ä‰∏™ + üòµ"):console.log("ÂÖ∂‰ªñÈîôËØØÔºÅ")},updatesdetail(e){const t=document.getElementsByTagName("html")[0].style;t.overflowY="hidden",this.imgselect=e,this.imgindex=this.lovelovelist.indexOf(e),this.opendetailpage()},opendetailpage(){this.isdtpageshow=!this.isdtpageshow},exitfullscreen(){document.fullscreenElement&&(console.log("ÂÖ®Â±èÁä∂ÊÄÅÔºåÈÄÄÂá∫ÂÖ®Â±è"),document.exitFullscreen(),this.isFull=!0)},connectStore(){this.lovelovelist=[];const e=indexedDB.open("ttbz_wallpaper");e.onerror=e=>{console.log("ÂèëÁîüÈîôËØØÔºÅ",e)},e.onsuccess=e=>{const t=e.target.result;this.db=t;const s=t.transaction("favorites").objectStore("favorites");s.count().onsuccess=e=>{this.total=e.target.result,this.total/this.Defaultstate.size<=1?this.length=1:this.length=parseInt(this.total/this.Defaultstate.size)+1};let i=null;s.openCursor().onsuccess=e=>{const t=e.target.result;if(t){if(i===this.Defaultstate.size-1)return this.lovelovelist.push(t.value),null;null===i&&1!==this.page?(console.log("ËØªÂèñË∑≥ËøáÔºö",(this.page-1)*this.Defaultstate.size),i=0,t.advance((this.page-1)*this.Defaultstate.size)):(i++,this.lovelovelist.push(t.value),t.continue())}}}}},watch:{lovelistids:{deep:!0,handler(e){localStorage.setItem("lovelistids",JSON.stringify(e))}}},created(){this.fff1(),this.CONNECT(),this.connectStore()},beforemounted(){},mounted(){}},u=v,d=s(1001),g=(0,d.Z)(u,r,c,!1,null,null,null),m=g.exports}}]);
//# sourceMappingURL=724.0ff1109c.js.map